# AutoShift AI/ML Platform Configuration
# Optimized for GPU-accelerated model serving with RHOAI/KServe + vLLM
#
# This profile enables the full AI/ML stack:
#   - GPU nodes (AWS p5.4xlarge) via MachineSet
#   - Node Feature Discovery (GPU detection)
#   - NVIDIA GPU Operator (drivers, device plugin, DCGM)
#   - Red Hat OpenShift AI (dashboard, KServe, model registry, etc.)
#   - OpenShift Serverless (KNative, required by KServe)
#   - OpenShift Data Foundation (model/artifact storage)
#   - Core platform services (GitOps, ACM, logging, security)
#
# Note: Service Mesh is NOT enabled â€” RHOAI v3 manages its own Istio internally.

# Global autoshift configuration
autoshift:
  # Set to true to deploy all policies in inform mode (dry run)
  dryRun: false

autoshiftGitRepo: https://github.com/auto-shift/autoshiftv2.git
autoshiftGitBranchTag: main

selfManagedHubSet: hub

# Hub Cluster Sets with Feature Flags
hubClusterSets:
  hub:
    labels:
      self-managed: 'true'
      openshift-version: '4.18.28'

      ### OpenShift GitOps (REQUIRED)
      gitops: 'true'
      gitops-subscription-name: openshift-gitops-operator
      gitops-channel: gitops-1.19
      gitops-source: redhat-operators
      gitops-source-namespace: openshift-marketplace

      ### Advanced Cluster Management (REQUIRED)
      acm-subscription-name: advanced-cluster-management
      acm-channel: release-2.15
      acm-source: redhat-operators
      acm-source-namespace: openshift-marketplace
      acm-availability-config: 'High'
      acm-observability: 'true'

      #########################################
      # AI/ML Stack
      #########################################

      ### GPU Nodes (AWS)
      gpu-nodes: '1'
      gpu-nodes-provider: aws
      gpu-nodes-instance-type: 'p5.4xlarge'
      # gpu-nodes-zone-1: 'us-east-2a'
      # gpu-nodes-region: 'us-east-2'

      ### Node Feature Discovery (required for GPU label detection)
      node-feature-discovery: 'true'
      node-feature-discovery-subscription-name: nfd
      node-feature-discovery-channel: stable
      node-feature-discovery-source: redhat-operators
      node-feature-discovery-source-namespace: openshift-marketplace

      ### NVIDIA GPU Operator
      nvidia-gpu: 'true'
      nvidia-gpu-subscription-name: gpu-operator-certified
      nvidia-gpu-channel: stable
      nvidia-gpu-source: certified-operators
      nvidia-gpu-source-namespace: openshift-marketplace
      nvidia-gpu-driver: 'true'
      nvidia-gpu-driver-toolkit: 'true'
      nvidia-gpu-toolkit: 'true'
      nvidia-gpu-device-plugin: 'true'
      nvidia-gpu-dcgm: 'true'
      nvidia-gpu-mig: 'false'
      nvidia-gpu-gfd: 'true'
      nvidia-gpu-sandbox: 'false'
      nvidia-gpu-vgpu-manager: 'false'
      nvidia-gpu-vgpu-device-manager: 'false'

      ### Red Hat OpenShift AI (RHOAI)
      rhoai: 'true'
      rhoai-subscription-name: rhods-operator
      rhoai-channel: fast-3.x
      rhoai-source: redhat-operators
      rhoai-source-namespace: openshift-marketplace
      rhoai-dashboard: 'true'
      rhoai-workbenches: 'true'
      rhoai-aipipelines: 'true'
      rhoai-kserve: 'true'
      rhoai-modelregistry: 'true'
      rhoai-ray: 'true'
      rhoai-kueue: 'true'
      rhoai-training: 'true'
      rhoai-trustyai: 'true'

      ### OpenShift Serverless (required by KServe)
      serverless: 'true'
      serverless-subscription-name: serverless-operator
      serverless-channel: stable
      serverless-source: redhat-operators
      serverless-source-namespace: openshift-marketplace

      #########################################
      # Storage
      #########################################

      ### Storage Nodes
      storage-nodes: '3'
      storage-nodes-instance-type: 'm6in.8xlarge'
      storage-nodes-provider: aws
      storage-nodes-numcpu: ''
      storage-nodes-memory-mib: ''
      storage-nodes-numcores-per-socket: ''

      ### OpenShift Data Foundation
      odf: 'true'
      odf-subscription-name: odf-operator
      odf-multi-cloud-gateway: standard
      odf-noobaa-pvpool: ''
      odf-noobaa-store-size: ''
      odf-noobaa-store-num-volumes: ''
      odf-ocs-storage-class-name: 'gp3-csi'
      odf-ocs-storage-size: '2Ti'
      odf-ocs-storage-count: '2'
      odf-ocs-storage-replicas: '3'
      odf-resource-profile: balanced
      odf-channel: stable-4.18
      odf-source: redhat-operators
      odf-source-namespace: openshift-marketplace

      #########################################
      # Observability & Security
      #########################################

      ### Loki
      loki: 'true'
      loki-subscription-name: loki-operator
      loki-channel: stable-6.4
      loki-source: redhat-operators
      loki-source-namespace: openshift-marketplace
      loki-size: 1x.extra-small
      loki-storageclass: gp3-csi
      loki-lokistack-name: logging-lokistack

      ### OpenShift Logging
      logging: 'true'
      logging-subscription-name: cluster-logging
      logging-channel: stable-6.4
      logging-source: redhat-operators
      logging-source-namespace: openshift-marketplace

      ### Cluster Observability Operator
      coo: 'true'
      coo-subscription-name: cluster-observability-operator
      coo-channel: stable
      coo-source: redhat-operators
      coo-source-namespace: openshift-marketplace

      ### Advanced Cluster Security
      acs: 'true'
      acs-subscription-name: rhacs-operator
      acs-egress-connectivity: Online
      acs-channel: stable
      acs-source: redhat-operators
      acs-source-namespace: openshift-marketplace

      ### Compliance Operator
      compliance: 'true'
      compliance-auto-remediate: 'true'
      compliance-subscription-name: compliance-operator
      compliance-source: redhat-operators
      compliance-source-namespace: openshift-marketplace
      compliance-channel: stable

      #########################################
      # Infrastructure Nodes (optional)
      #########################################
      infra-nodes: ''
      infra-nodes-provider: aws
      infra-nodes-numcpu: ''
      infra-nodes-memory-mib: ''
      infra-nodes-numcores-per-socket: ''
      infra-nodes-zone-1: ''

      ### Worker Nodes
      worker-nodes: ''
      worker-nodes-numcpu: ''
      worker-nodes-memory-mib: ''
      worker-nodes-numcores-per-socket: ''
      worker-nodes-zone-1: ''

      #########################################
      # Disabled for AI profile
      #########################################
      ### Developer Tooling (not needed for AI serving)
      dev-spaces: 'false'
      dev-hub: 'false'
      pipelines: 'false'
      tas: 'false'
      quay: 'false'
      gitops-dev: 'false'

      ### Service Mesh (RHOAI v3 manages its own service mesh internally)
      tempo: 'false'
      kiali: 'false'
      servicemesh3: 'false'

      ### Infrastructure Operators (not needed for cloud AI)
      metallb: 'false'
      nmstate: 'false'
      virt: 'false'
      lvm: 'false'
      local-storage: 'false'
      imageregistry: 'false'

      ### Ansible Automation Platform
      aap: 'false'

      ### Disconnected Mirror
      mirror-catalog-suffix: 'mirror'
