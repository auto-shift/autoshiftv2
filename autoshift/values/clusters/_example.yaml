# ==============================================================================
# Per-Cluster Override Example - ALL Available Options
# ==============================================================================
# Copy this file and rename it after your cluster (e.g., my-cluster.yaml).
# Labels defined here override clusterset labels for the named cluster.
# Precedence: cluster > clusterset > helm defaults
#
# Usage in ArgoCD Application:
#   valueFiles:
#     - values/global.yaml
#     - values/clustersets/hub.yaml
#     - values/clustersets/managed.yaml
#     - values/clusters/my-cluster.yaml    # <-- this file
#
# Notes:
#   - Only include labels you want to CHANGE from the clusterset defaults
#   - Create one file per cluster for clarity
#   - The most common per-cluster overrides are NMState network configuration
#     and cluster sizing (infra/worker/storage nodes)
# ==============================================================================

clusters:
  my-cluster-name:    # <-- Must match the cluster name in ACM
    labels:
      # =======================================================================
      # Any label from hub or managed clusterset can be overridden here.
      # Only include labels you want to CHANGE from the clusterset defaults.
      # =======================================================================

      # =======================================================================
      # Kubernetes NMState Operator - Per-Cluster Network Configuration
      # =======================================================================
      # NMState is the most common per-cluster override. Each cluster typically
      # has unique network configuration (bonds, VLANs, static IPs, routes).
      # The operator subscription is defined at the clusterset level â€” only
      # network configuration labels are needed here.
      #
      # Identifiers ({id}, {M}) can be numbers or names (e.g., '1', 'mgmt', 'storage').
      # CONSTRAINT: Identifiers must NOT contain hyphens (-).
      # Generated NNCPs: nmstate-bond-{id}, nmstate-vlan-{id}, nmstate-ethernet-{id},
      #                  nmstate-ovs-bridge-{id}, nmstate-network-config
      #
      nmstate: 'true'
      #
      # --- Bond Interface --- (NNCP: nmstate-bond-{id})
      # nmstate-bond-{id}: 'bond0'
      # nmstate-bond-{id}-mode: '802.3ad'              # '802.3ad', 'active-backup', 'balance-rr', etc.
      # nmstate-bond-{id}-port-{M}: 'eno1'
      # nmstate-bond-{id}-mtu: '9000'
      # nmstate-bond-{id}-mac: 'aa.bb.cc.dd.ee.ff'
      # nmstate-bond-{id}-miimon: '100'
      # nmstate-bond-{id}-ipv4: 'dhcp'                 # 'dhcp', 'static', or 'disabled'
      # nmstate-bond-{id}-ipv4-address-{M}: '192.168.1.10'
      # nmstate-bond-{id}-ipv4-address-{M}-cidr: '24'
      # nmstate-bond-{id}-ipv6: 'disabled'
      nmstate-bond-mgmt: 'bond0'
      nmstate-bond-mgmt-mode: '802.3ad'
      nmstate-bond-mgmt-port-1: 'eno1'
      nmstate-bond-mgmt-port-2: 'eno2'
      nmstate-bond-mgmt-mtu: '9000'
      nmstate-bond-mgmt-miimon: '100'
      nmstate-bond-mgmt-ipv4: 'dhcp'
      nmstate-bond-mgmt-ipv6: 'disabled'
      #
      # --- VLAN Interface --- (NNCP: nmstate-vlan-{id})
      # nmstate-vlan-{id}: 'bond0.100'
      # nmstate-vlan-{id}-id: '100'
      # nmstate-vlan-{id}-base: 'bond0'
      # nmstate-vlan-{id}-mtu: '1500'
      # nmstate-vlan-{id}-ipv4: 'dhcp'                 # 'dhcp', 'static', or 'disabled'
      # nmstate-vlan-{id}-ipv4-address-{M}: '10.100.1.10'
      # nmstate-vlan-{id}-ipv4-address-{M}-cidr: '24'
      nmstate-vlan-data: 'bond0.100'
      nmstate-vlan-data-id: '100'
      nmstate-vlan-data-base: 'bond0'
      nmstate-vlan-data-mtu: '1500'
      nmstate-vlan-data-ipv4: 'static'
      nmstate-vlan-data-ipv4-address-1: '10.100.1.10'
      nmstate-vlan-data-ipv4-address-1-cidr: '24'
      #
      # --- Ethernet Interface --- (NNCP: nmstate-ethernet-{id})
      # nmstate-ethernet-{id}: 'eno3'
      # nmstate-ethernet-{id}-state: 'up'              # 'up' or 'down'
      # nmstate-ethernet-{id}-mtu: '9000'
      # nmstate-ethernet-{id}-mac: 'aa.bb.cc.dd.ee.ff'
      nmstate-ethernet-nic3: 'eno3'
      nmstate-ethernet-nic3-state: 'up'
      nmstate-ethernet-nic3-mtu: '9000'
      #
      # --- Static Routes --- (NNCP: nmstate-network-config)
      # nmstate-route-{id}-dest: '10.0.0.0'
      # nmstate-route-{id}-cidr: '8'
      # nmstate-route-{id}-gateway: '192.168.1.1'
      # nmstate-route-{id}-interface: 'bond0'
      # nmstate-route-{id}-metric: '100'
      nmstate-route-dc-dest: '10.0.0.0'
      nmstate-route-dc-cidr: '8'
      nmstate-route-dc-gateway: '192.168.1.1'
      nmstate-route-dc-interface: 'bond0'
      nmstate-route-dc-metric: '100'
      #
      # --- DNS Configuration --- (NNCP: nmstate-network-config)
      # nmstate-dns-server-{id}: '8.8.8.8'
      # nmstate-dns-search-{id}: 'example.com'
      nmstate-dns-server-primary: '8.8.8.8'
      nmstate-dns-search-corp: 'example.com'
      #
      # --- Node Selector ---
      # nmstate-nodeselector-{id}-prefix: 'node-role.kubernetes.io'
      # nmstate-nodeselector-{id}-name: 'worker'
      # nmstate-nodeselector-{id}-value: ''
      nmstate-nodeselector-worker-prefix: 'node-role.kubernetes.io'
      nmstate-nodeselector-worker-name: 'worker'
      nmstate-nodeselector-worker-value: ''
      #
      # --- OVS Bridge (for UDN/localnet) --- (NNCP: nmstate-ovs-bridge-{id})
      # nmstate-ovs-bridge-{id}: 'ovs-br1'
      # nmstate-ovs-bridge-{id}-port-{M}: 'bond1'
      # nmstate-ovs-bridge-{id}-stp: 'false'
      # nmstate-ovs-bridge-{id}-allow-extra-patch-ports: 'true'
      # nmstate-ovs-bridge-{id}-mcast-snooping: 'false'
      nmstate-ovs-bridge-br1: 'ovs-br1'
      nmstate-ovs-bridge-br1-port-1: 'bond1'
      nmstate-ovs-bridge-br1-stp: 'false'
      nmstate-ovs-bridge-br1-allow-extra-patch-ports: 'true'
      nmstate-ovs-bridge-br1-mcast-snooping: 'false'
      #
      # --- OVN Bridge Mapping (for UDN localnet) --- (NNCP: nmstate-network-config)
      # nmstate-ovn-mapping-{id}-localnet: 'localnet1'
      # nmstate-ovn-mapping-{id}-bridge: 'ovs-br1'
      nmstate-ovn-mapping-net1-localnet: 'localnet1'
      nmstate-ovn-mapping-net1-bridge: 'ovs-br1'
      #
      # --- Host-Specific Config (per-node IPs, each host gets its own NNCP) ---
      # nmstate-host-{id}-hostname: 'worker-0.ocp.example.com'
      # nmstate-host-{id}-bond-{id}: 'bond0'
      # nmstate-host-{id}-bond-{id}-mode: '802.3ad'
      # nmstate-host-{id}-bond-{id}-port-{M}: 'eno1'
      # nmstate-host-{id}-bond-{id}-ipv4: 'static'
      # nmstate-host-{id}-bond-{id}-ipv4-address-{M}: '192.168.1.10'
      # nmstate-host-{id}-bond-{id}-ipv4-address-{M}-cidr: '24'
      # nmstate-host-{id}-bond-{id}-ipv6: 'disabled'
      # nmstate-host-{id}-vlan-{id}: 'bond0.100'
      # nmstate-host-{id}-vlan-{id}-id: '100'
      # nmstate-host-{id}-vlan-{id}-base: 'bond0'
      # nmstate-host-{id}-vlan-{id}-ipv4: 'static'
      # nmstate-host-{id}-vlan-{id}-ipv4-address-{M}: '10.100.1.10'
      # nmstate-host-{id}-vlan-{id}-ipv4-address-{M}-cidr: '24'
      # nmstate-host-{id}-route-{id}-dest: '172.16.0.0'
      # nmstate-host-{id}-route-{id}-cidr: '12'
      # nmstate-host-{id}-route-{id}-gateway: '10.100.1.1'
      # nmstate-host-{id}-route-{id}-interface: 'bond0.100'
      # nmstate-host-{id}-dns-server-{id}: '10.0.0.1'
      # nmstate-host-{id}-dns-search-{id}: 'internal.example.com'
      nmstate-host-worker0-hostname: 'worker-0.ocp.example.com'
      nmstate-host-worker0-bond-mgmt: 'bond0'
      nmstate-host-worker0-bond-mgmt-mode: '802.3ad'
      nmstate-host-worker0-bond-mgmt-port-1: 'eno1'
      nmstate-host-worker0-bond-mgmt-port-2: 'eno2'
      nmstate-host-worker0-bond-mgmt-ipv4: 'static'
      nmstate-host-worker0-bond-mgmt-ipv4-address-1: '192.168.1.10'
      nmstate-host-worker0-bond-mgmt-ipv4-address-1-cidr: '24'
      nmstate-host-worker0-bond-mgmt-ipv6: 'disabled'
      #
      # --- Legacy File-Based ---
      # nmstate-nncp-{name}: 'filename'      # Filename in policies/nmstate/files/
      nmstate-nncp-myconfig: 'filename'

      # =======================================================================
      # Infrastructure Node Sizing
      # =======================================================================
      infra-nodes: '6'
      infra-nodes-numcpu: '8'
      infra-nodes-memory-mib: '24576'
      infra-nodes-numcores-per-socket: '4'
      infra-nodes-provider: aws
      infra-nodes-instance-type: 'm5.2xlarge'
      infra-nodes-zone-1: 'us-east-2a'

      # =======================================================================
      # Worker Node Sizing
      # =======================================================================
      worker-nodes: '3'
      worker-nodes-numcpu: '8'
      worker-nodes-memory-mib: '32768'
      worker-nodes-numcores-per-socket: '4'
      worker-nodes-zone-1: 'us-east-2a'

      # =======================================================================
      # Storage Node Sizing
      # =======================================================================
      storage-nodes: '3'
      storage-nodes-numcpu: '16'
      storage-nodes-memory-mib: '65536'
      storage-nodes-numcores-per-socket: '8'
      storage-nodes-provider: aws
      storage-nodes-instance-type: 'm6in.8xlarge'

      # =======================================================================
      # Master Nodes (SNO / Compact clusters)
      # =======================================================================
      master-nodes: 'true'
      master-max-pods: '500'

      # =======================================================================
      # Core Configuration
      # =======================================================================
      openshift-version: '4.20.12'

      # =======================================================================
      # Operator Toggles
      # =======================================================================
      gitops: 'true'
      tempo: 'true'
      kiali: 'true'
      servicemesh3: 'true'
      metallb: 'true'
      aap: 'true'
      lvm: 'true'
      local-storage: 'true'
      odf: 'true'
      imageregistry: 'true'
      acs: 'true'
      dev-spaces: 'true'
      dev-hub: 'true'
      pipelines: 'true'
      tas: 'true'
      quay: 'true'
      gitops-dev: 'true'
      loki: 'true'
      logging: 'true'
      coo: 'true'
      compliance: 'true'
      virt: 'true'
      mtv: 'true'
      node-feature-discovery: 'true'
      sriov: 'true'

      # =======================================================================
      # Version Pinning (overrides clusterset channel-based updates)
      # =======================================================================
      gitops-version: 'openshift-gitops-operator.v1.19.1'
      tempo-version: 'tempo-operator.v0.19.0-3'
      kiali-version: 'kiali-operator.v2.17.3'
      servicemesh3-version: 'servicemeshoperator3.v3.2.1'
      metallb-version: 'metallb-operator.v4.20.0-202602021426'
      aap-version: 'aap-operator.v2.6.0-0.1768951413'
      lvm-version: 'lvms-operator.v4.20.0'
      local-storage-version: 'local-storage-operator.v4.20.0-202602032049'
      odf-version: 'odf-operator.v4.20.5-rhodf'
      nmstate-version: 'kubernetes-nmstate-operator.4.20.0-202601292039'
      acs-version: 'rhacs-operator.v4.9.2'
      dev-spaces-version: 'devspacesoperator.v3.26.0'
      dev-hub-version: 'rhdh-operator.v1.8.3'
      pipelines-version: 'openshift-pipelines-operator-rh.v1.21.0'
      tas-version: 'rhtas-operator.v1.3.2'
      quay-version: 'quay-operator.v3.8.15'
      loki-version: 'loki-operator.v6.4.2'
      logging-version: 'cluster-logging.v6.4.2'
      coo-version: 'cluster-observability-operator.v1.3.1'
      compliance-version: 'compliance-operator.v1.8.2'
      virt-version: 'kubevirt-hyperconverged-operator.v4.20.6'
      mtv-version: 'mtv-operator.v2.9.6'
      node-feature-discovery-version: 'nfd.4.20.0-202601292039'

      # =======================================================================
      # Channel Overrides
      # =======================================================================
      gitops-channel: gitops-1.19
      acs-channel: stable
      odf-channel: stable-4.20
      pipelines-channel: pipelines-1.21
      acm-channel: release-2.15

      # =======================================================================
      # ACM Config (hub clusters only)
      # =======================================================================
      acm-availability-config: 'High'
      acm-observability: 'true'

      # =======================================================================
      # ODF Sizing
      # =======================================================================
      odf-multi-cloud-gateway: standard
      odf-ocs-storage-class-name: 'gp3-csi'
      odf-ocs-storage-size: '2Ti'
      odf-ocs-storage-count: '2'
      odf-ocs-storage-replicas: '3'
      odf-ocs-flexible-scaling: 'true'
      odf-resource-profile: balanced
      odf-default-storageclass: 'ocs-storagecluster-ceph-rbd'
      odf-csi-all-nodes: 'false'            # 'true' to run CSI plugins on all nodes (masters, infra, storage)

      # =======================================================================
      # Compliance Config
      # =======================================================================
      compliance-auto-remediate: 'true'
      compliance-storage-class: 'gp3-csi'   # StorageClass for compliance scan results

      # =======================================================================
      # Loki Sizing
      # =======================================================================
      loki-size: 1x.extra-small
      loki-storageclass: gp3-csi

      # =======================================================================
      # Disconnected Mirror
      # =======================================================================
      disconnected-mirror: 'true'
      mirror-catalog-suffix: 'mirror'
