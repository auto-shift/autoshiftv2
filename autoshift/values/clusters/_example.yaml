# ==============================================================================
# Per-Cluster Override Example - ALL Available Options
# ==============================================================================
# Copy this file and rename it after your cluster (e.g., my-cluster.yaml).
# Labels defined here override clusterset labels for the named cluster.
# Precedence: cluster > clusterset > helm defaults
#
# Usage in ArgoCD Application:
#   valueFiles:
#     - values/global.yaml
#     - values/clustersets/hub.yaml
#     - values/clustersets/managed.yaml
#     - values/clusters/my-cluster.yaml    # <-- this file
#
# Notes:
#   - Only include labels you want to CHANGE from the clusterset defaults
#   - Create one file per cluster for clarity
#   - The most common per-cluster overrides are NMState network configuration
#     and cluster sizing (infra/worker/storage nodes)
# ==============================================================================

clusters:
  my-cluster-name:    # <-- Must match the cluster name in ACM
    labels:
      # =======================================================================
      # Any label from hub or managed clusterset can be overridden here.
      # Only include labels you want to CHANGE from the clusterset defaults.
      # =======================================================================

      # =======================================================================
      # Kubernetes NMState Operator - Per-Cluster Network Configuration
      # =======================================================================
      # NMState is the most common per-cluster override. Each cluster typically
      # has unique network configuration (bonds, VLANs, static IPs, routes).
      # The operator subscription is defined at the clusterset level â€” only
      # network configuration labels are needed here.
      #
      nmstate: 'true'
      #
      # --- Bond Interface ---
      # nmstate-bond-{N}: 'bond0'
      # nmstate-bond-{N}-mode: '802.3ad'              # '802.3ad', 'active-backup', 'balance-rr', etc.
      # nmstate-bond-{N}-port-{M}: 'eno1'
      # nmstate-bond-{N}-mtu: '9000'
      # nmstate-bond-{N}-mac: 'aa.bb.cc.dd.ee.ff'
      # nmstate-bond-{N}-miimon: '100'
      # nmstate-bond-{N}-ipv4: 'dhcp'                 # 'dhcp', 'static', or 'disabled'
      # nmstate-bond-{N}-ipv4-address-{M}: '192.168.1.10'
      # nmstate-bond-{N}-ipv4-address-{M}-cidr: '24'
      # nmstate-bond-{N}-ipv6: 'disabled'
      nmstate-bond-1: 'bond0'
      nmstate-bond-1-mode: '802.3ad'
      nmstate-bond-1-port-1: 'eno1'
      nmstate-bond-1-port-2: 'eno2'
      nmstate-bond-1-mtu: '9000'
      nmstate-bond-1-miimon: '100'
      nmstate-bond-1-ipv4: 'dhcp'
      nmstate-bond-1-ipv6: 'disabled'
      #
      # --- VLAN Interface ---
      # nmstate-vlan-{N}: 'bond0.100'
      # nmstate-vlan-{N}-id: '100'
      # nmstate-vlan-{N}-base: 'bond0'
      # nmstate-vlan-{N}-mtu: '1500'
      # nmstate-vlan-{N}-ipv4: 'dhcp'                 # 'dhcp', 'static', or 'disabled'
      # nmstate-vlan-{N}-ipv4-address-{M}: '10.100.1.10'
      # nmstate-vlan-{N}-ipv4-address-{M}-cidr: '24'
      nmstate-vlan-1: 'bond0.100'
      nmstate-vlan-1-id: '100'
      nmstate-vlan-1-base: 'bond0'
      nmstate-vlan-1-mtu: '1500'
      nmstate-vlan-1-ipv4: 'static'
      nmstate-vlan-1-ipv4-address-1: '10.100.1.10'
      nmstate-vlan-1-ipv4-address-1-cidr: '24'
      #
      # --- Ethernet Interface ---
      # nmstate-ethernet-{N}: 'eno3'
      # nmstate-ethernet-{N}-state: 'up'              # 'up' or 'down'
      # nmstate-ethernet-{N}-mtu: '9000'
      # nmstate-ethernet-{N}-mac: 'aa.bb.cc.dd.ee.ff'
      nmstate-ethernet-1: 'eno3'
      nmstate-ethernet-1-state: 'up'
      nmstate-ethernet-1-mtu: '9000'
      #
      # --- Static Routes ---
      # nmstate-route-{N}-dest: '10.0.0.0'
      # nmstate-route-{N}-cidr: '8'
      # nmstate-route-{N}-gateway: '192.168.1.1'
      # nmstate-route-{N}-interface: 'bond0'
      # nmstate-route-{N}-metric: '100'
      nmstate-route-1-dest: '10.0.0.0'
      nmstate-route-1-cidr: '8'
      nmstate-route-1-gateway: '192.168.1.1'
      nmstate-route-1-interface: 'bond0'
      nmstate-route-1-metric: '100'
      #
      # --- DNS Configuration ---
      # nmstate-dns-server-{N}: '8.8.8.8'
      # nmstate-dns-search-{N}: 'example.com'
      nmstate-dns-server-1: '8.8.8.8'
      nmstate-dns-search-1: 'example.com'
      #
      # --- Node Selector ---
      # nmstate-nodeselector-{N}-prefix: 'node-role.kubernetes.io'
      # nmstate-nodeselector-{N}-name: 'worker'
      # nmstate-nodeselector-{N}-value: ''
      nmstate-nodeselector-1-prefix: 'node-role.kubernetes.io'
      nmstate-nodeselector-1-name: 'worker'
      nmstate-nodeselector-1-value: ''
      #
      # --- OVS Bridge (for UDN/localnet) ---
      # nmstate-ovs-bridge-{N}: 'ovs-br1'
      # nmstate-ovs-bridge-{N}-port-{M}: 'bond1'
      # nmstate-ovs-bridge-{N}-stp: 'false'
      # nmstate-ovs-bridge-{N}-allow-extra-patch-ports: 'true'
      # nmstate-ovs-bridge-{N}-mcast-snooping: 'false'
      nmstate-ovs-bridge-1: 'ovs-br1'
      nmstate-ovs-bridge-1-port-1: 'bond1'
      nmstate-ovs-bridge-1-stp: 'false'
      nmstate-ovs-bridge-1-allow-extra-patch-ports: 'true'
      nmstate-ovs-bridge-1-mcast-snooping: 'false'
      #
      # --- OVN Bridge Mapping (for UDN localnet) ---
      # nmstate-ovn-mapping-{N}-localnet: 'localnet1'
      # nmstate-ovn-mapping-{N}-bridge: 'ovs-br1'
      nmstate-ovn-mapping-1-localnet: 'localnet1'
      nmstate-ovn-mapping-1-bridge: 'ovs-br1'
      #
      # --- Host-Specific Config (per-node IPs, each host gets its own NNCP) ---
      # nmstate-host-{H}-hostname: 'worker-0.ocp.example.com'
      # nmstate-host-{H}-bond-{N}: 'bond0'
      # nmstate-host-{H}-bond-{N}-mode: '802.3ad'
      # nmstate-host-{H}-bond-{N}-port-{M}: 'eno1'
      # nmstate-host-{H}-bond-{N}-ipv4: 'static'
      # nmstate-host-{H}-bond-{N}-ipv4-address-{M}: '192.168.1.10'
      # nmstate-host-{H}-bond-{N}-ipv4-address-{M}-cidr: '24'
      # nmstate-host-{H}-bond-{N}-ipv6: 'disabled'
      # nmstate-host-{H}-vlan-{N}: 'bond0.100'
      # nmstate-host-{H}-vlan-{N}-id: '100'
      # nmstate-host-{H}-vlan-{N}-base: 'bond0'
      # nmstate-host-{H}-vlan-{N}-ipv4: 'static'
      # nmstate-host-{H}-vlan-{N}-ipv4-address-{M}: '10.100.1.10'
      # nmstate-host-{H}-vlan-{N}-ipv4-address-{M}-cidr: '24'
      # nmstate-host-{H}-route-{N}-dest: '172.16.0.0'
      # nmstate-host-{H}-route-{N}-cidr: '12'
      # nmstate-host-{H}-route-{N}-gateway: '10.100.1.1'
      # nmstate-host-{H}-route-{N}-interface: 'bond0.100'
      # nmstate-host-{H}-dns-server-{N}: '10.0.0.1'
      # nmstate-host-{H}-dns-search-{N}: 'internal.example.com'
      nmstate-host-1-hostname: 'worker-0.ocp.example.com'
      nmstate-host-1-bond-1: 'bond0'
      nmstate-host-1-bond-1-mode: '802.3ad'
      nmstate-host-1-bond-1-port-1: 'eno1'
      nmstate-host-1-bond-1-port-2: 'eno2'
      nmstate-host-1-bond-1-ipv4: 'static'
      nmstate-host-1-bond-1-ipv4-address-1: '192.168.1.10'
      nmstate-host-1-bond-1-ipv4-address-1-cidr: '24'
      nmstate-host-1-bond-1-ipv6: 'disabled'
      #
      # --- Legacy File-Based ---
      # nmstate-nncp-{name}: 'filename'      # Filename in policies/nmstate/files/
      nmstate-nncp-myconfig: 'filename'

      # =======================================================================
      # NetApp Trident - Per-Cluster Storage Configuration
      # =======================================================================
      # Trident can deploy backends using label-driven configuration
      # (recommended) or legacy file-based configuration.
      #
      # Enable Trident policies:
      #
      trident: 'true'
      #
      # Required: Name of credentials secret in policies-autoshift namespace
      #
      trident-creds-secret: 'netapp-creds'
      #
      # --- Configuration Mode ---
      # trident-label-config: 'true'         # Recommended
      # trident-file-config: 'true'          # Legacy compatibility
      #
      trident-label-config: 'true'
      #
      # =======================================================================
      # NetApp Trident - Per-Cluster Storage Configuration
      # =======================================================================
      # Trident can deploy backends using label-driven configuration
      # (recommended) or legacy file-based configuration.
      #
      # Enable Trident policies:
      #
      trident: 'true'
      #
      # Required: Name of credentials secret in policies-autoshift namespace
      #
      trident-creds-secret: 'netapp-creds'
      #
      # --- Configuration Mode ---
      # trident-label-config: 'true'         # Recommended
      #
      trident-label-config: 'true'
      #
      # =======================================================================
      # Label-Driven Backend Configuration (Recommended)
      # =======================================================================
      # Format:
      # trident-backend-{N}-{field}
      #
      # Minimum required fields:
      # trident-backend-{N}-svm: 'Data-SVM'
      # trident-backend-{N}-managementlif: '192.168.1.1'
      # trident-backend-{N}-secret: 'netapp-creds'
      #
      # Optional overrides:
      # trident-backend-{N}-storagedriver: 'ontap-san'
      # trident-backend-{N}-santype: 'nvme'          # 'nvme' or 'iscsi'
      #
      # --- Backend 1 Example ---
      #
      trident-backend-1-svm: 'Data-NFS-SVM-OpenShift'
      trident-backend-1-managementlif: '192.168.1.1'
      trident-backend-1-secret: 'netapp-creds'
      trident-backend-1-santype: 'nvme'
      #
      # --- Backend 2 Example ---
      #
      # trident-backend-2-svm: 'Data-SVM-Backup'
      # trident-backend-2-managementlif: '192.168.1.2'
      # trident-backend-2-secret: 'netapp-creds'
      # trident-backend-2-santype: 'iscsi'
      #
      # Each increment creates:
      #   - One TridentBackendConfig
      #   - One StorageClass
      #
      # Generated Naming Convention:
      #
      # Backend:
      #   backend-<sanitized-svm>-<santype>
      #
      # StorageClass:
      #   <sanitized-svm>-<santype>
      #
      # Defaults (if not specified):
      #
      # storageDriverName = ontap-san
      # sanType = nvme
      # fsType = ext4
      # allowVolumeExpansion = true
      #
      # =======================================================================
      # Legacy File-Based Configuration
      # =======================================================================
      # Raw YAML files placed in policies/trident/files/ will automatically
      # be applied via ConfigMaps when Trident is available.
      #
      # Format:
      # trident-config-{type}-{N}: 'filename.yaml'
      #
      # Example:
      #
      # trident-config-backend-1: 'backend-ontap.yaml'
      # trident-config-storageclass-1: 'sc-gold.yaml'
      #
      # This method is for:
      #   - Backward compatibility
      #   - Highly customized backends
      #   - Advanced ONTAP options not exposed via labels
      #
      # New deployments should use label-driven configuration.
      #
      # =======================================================================
      # Infrastructure Node Sizing
      # =======================================================================
      infra-nodes: '6'
      infra-nodes-numcpu: '8'
      infra-nodes-memory-mib: '24576'
      infra-nodes-numcores-per-socket: '4'
      infra-nodes-provider: aws
      infra-nodes-instance-type: 'm5.2xlarge'
      infra-nodes-zone-1: 'us-east-2a'

      # =======================================================================
      # Worker Node Sizing
      # =======================================================================
      worker-nodes: '3'
      worker-nodes-numcpu: '8'
      worker-nodes-memory-mib: '32768'
      worker-nodes-numcores-per-socket: '4'
      worker-nodes-zone-1: 'us-east-2a'

      # =======================================================================
      # Storage Node Sizing
      # =======================================================================
      storage-nodes: '3'
      storage-nodes-numcpu: '16'
      storage-nodes-memory-mib: '65536'
      storage-nodes-numcores-per-socket: '8'
      storage-nodes-provider: aws
      storage-nodes-instance-type: 'm6in.8xlarge'

      # =======================================================================
      # Master Nodes (SNO / Compact clusters)
      # =======================================================================
      master-nodes: 'true'
      master-max-pods: '500'

      # =======================================================================
      # Core Configuration
      # =======================================================================
      openshift-version: '4.20.12'

      # =======================================================================
      # Operator Toggles
      # =======================================================================
      gitops: 'true'
      tempo: 'true'
      kiali: 'true'
      servicemesh3: 'true'
      metallb: 'true'
      aap: 'true'
      lvm: 'true'
      local-storage: 'true'
      odf: 'true'
      imageregistry: 'true'
      acs: 'true'
      dev-spaces: 'true'
      dev-hub: 'true'
      pipelines: 'true'
      tas: 'true'
      quay: 'true'
      gitops-dev: 'true'
      loki: 'true'
      logging: 'true'
      coo: 'true'
      compliance: 'true'
      virt: 'true'
      mtv: 'true'
      node-feature-discovery: 'true'
      sriov: 'true'

      # =======================================================================
      # Version Pinning (overrides clusterset channel-based updates)
      # =======================================================================
      gitops-version: 'openshift-gitops-operator.v1.19.1'
      tempo-version: 'tempo-operator.v0.19.0-3'
      kiali-version: 'kiali-operator.v2.17.3'
      servicemesh3-version: 'servicemeshoperator3.v3.2.1'
      metallb-version: 'metallb-operator.v4.20.0-202602021426'
      aap-version: 'aap-operator.v2.6.0-0.1768951413'
      lvm-version: 'lvms-operator.v4.20.0'
      local-storage-version: 'local-storage-operator.v4.20.0-202602032049'
      odf-version: 'odf-operator.v4.20.5-rhodf'
      nmstate-version: 'kubernetes-nmstate-operator.4.20.0-202601292039'
      acs-version: 'rhacs-operator.v4.9.2'
      dev-spaces-version: 'devspacesoperator.v3.26.0'
      dev-hub-version: 'rhdh-operator.v1.8.3'
      pipelines-version: 'openshift-pipelines-operator-rh.v1.21.0'
      tas-version: 'rhtas-operator.v1.3.2'
      quay-version: 'quay-operator.v3.8.15'
      loki-version: 'loki-operator.v6.4.2'
      logging-version: 'cluster-logging.v6.4.2'
      coo-version: 'cluster-observability-operator.v1.3.1'
      compliance-version: 'compliance-operator.v1.8.2'
      virt-version: 'kubevirt-hyperconverged-operator.v4.20.6'
      mtv-version: 'mtv-operator.v2.9.6'
      node-feature-discovery-version: 'nfd.4.20.0-202601292039'

      # =======================================================================
      # Channel Overrides
      # =======================================================================
      gitops-channel: gitops-1.19
      acs-channel: stable
      odf-channel: stable-4.20
      pipelines-channel: pipelines-1.21
      acm-channel: release-2.15

      # =======================================================================
      # ACM Config (hub clusters only)
      # =======================================================================
      acm-availability-config: 'High'
      acm-observability: 'true'

      # =======================================================================
      # ODF Sizing
      # =======================================================================
      odf-multi-cloud-gateway: standard
      odf-ocs-storage-class-name: 'gp3-csi'
      odf-ocs-storage-size: '2Ti'
      odf-ocs-storage-count: '2'
      odf-ocs-storage-replicas: '3'
      odf-ocs-flexible-scaling: 'true'
      odf-resource-profile: balanced
      odf-default-storageclass: 'ocs-storagecluster-ceph-rbd'
      odf-csi-all-nodes: 'false'            # 'true' to run CSI plugins on all nodes (masters, infra, storage)

      # =======================================================================
      # Compliance Config
      # =======================================================================
      compliance-auto-remediate: 'true'
      compliance-storage-class: 'gp3-csi'   # StorageClass for compliance scan results

      # =======================================================================
      # Loki Sizing
      # =======================================================================
      loki-size: 1x.extra-small
      loki-storageclass: gp3-csi

      # =======================================================================
      # Disconnected Mirror
      # =======================================================================
      disconnected-mirror: 'true'
      mirror-catalog-suffix: 'mirror'
      # =======================================================================
      # Trident
      # =======================================================================
      trident-label-config: 'false'
      trident-file-config: 'false'      
      trident-backend-1-managementlif: '192.168.1.1' 
      trident-backend-1-svm: 'test-svm'
      trident-backend-1-secret: 'secret-name'